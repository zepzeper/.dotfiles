# ============================================
# BASIC SETTINGS
# ============================================
set -g default-shell /usr/bin/zsh
set -sg escape-time 10
set -g base-index 1
set -g pane-base-index 1
set -g mode-keys vi
set -g allow-passthrough on
set -g update-environment "DISPLAY WAYLAND_DISPLAY XDG_RUNTIME_DIR"

# Enable true color support
set -g default-terminal "tmux-256color"
set -ga terminal-overrides ",*256col*:Tc"

# ============================================
# KEY BINDINGS
# ============================================
set -g prefix C-a
unbind C-b
bind C-a send-prefix

unbind '"'
unbind %
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
bind r source-file ~/.tmux.conf \; run-shell "notify-send 'Tmux' 'Config reloaded!'"

bind -r o new-window -c '#{pane_current_path}'

bind e copy-mode
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection
set -g set-clipboard on

bind f new-window "$HOME/.local/bin/tmux-sessionizer.sh"
bind i popup -E "$HOME/.local/bin/cheat.sh"
bind k popup -E "$HOME/.local/bin/snippet.sh"
bind g new-window "$HOME/.cargo/bin/bulletty"
bind j popup -E "cd $HOME/personal/.dotfiles && script=\$(echo -e 'sync-system.sh\nsync-remote.sh' | fzf --height=10 --header='Select sync script') && [ -n \"\$script\" ] && bash \"\$script\""
bind p run-shell -b 'ghostty --title="pomo-timer" --command="/usr/bin/zsh $HOME/.local/bin/pomo-run.sh work"'

# ============================================
# ULTRA MINIMAL NORDIC
# ============================================

# Nordic colors
MUTED="#4C566A"       # Polar Night (lighter)
SUBTLE="#D8DEE9"      # Snow Storm
TEXT="#ECEFF4"        # Snow Storm (bright)
IRIS="#88C0D0"        # Frost (Cyan)
SURFACE="#222630"     # Polar Night (lighter)
BASE="#1E222A"        # Polar Night (darkest)

# Status bar - transparent background
set -g status-style bg=default,fg=$SUBTLE
set -g status-position top
set -g status-interval 1
set -g status-justify left

# Pane borders
set -g pane-border-style fg=$MUTED
set -g pane-active-border-style fg=$SUBTLE

# Status left - session name and windows together on the left
set -g status-left-length 200
set -g status-left "#[fg=$TEXT]#S  #[fg=$MUTED]â”‚ "

# Window status - only numbers
set -g window-status-separator ""
set -g window-status-format "#[fg=$MUTED]#I  "
set -g window-status-current-format "#[fg=$TEXT]#I  "

# Status right - time on the right
set -g status-right-length 100
set -g status-right "#[fg=$SUBTLE]%I:%M %p "

# Message styling
set -g message-style bg=$IRIS,fg=$BASE
set -g message-command-style bg=$SURFACE,fg=$TEXT

# Copy mode styling
set -g mode-style bg=$SURFACE,fg=$TEXT
