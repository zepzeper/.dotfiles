# ============================================
# BASIC SETTINGS
# ============================================
set -g default-shell /usr/bin/zsh
set -sg escape-time 10
set -g base-index 1
set -g pane-base-index 1
set -g mode-keys vi
set -g allow-passthrough on
# FIX FOR WAYLAND/WL-COPY: Ensures the Tmux server inherits the necessary environment variables
set -g update-environment "DISPLAY WAYLAND_DISPLAY XDG_RUNTIME_DIR"

# ============================================
# KEY BINDINGS
# ============================================
# Change prefix
set -g prefix C-a
unbind C-b
bind C-a send-prefix

# Splits (maintain current path)
unbind '"'
unbind %
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"

bind r source-file ~/.tmux.conf \; run-shell "notify-send 'Tmux' 'Config reloaded!'"
# New window
bind -r o new-window -c '#{pane_current_path}'

# Copy mode
bind e copy-mode
bind -T copy-mode-vi v send -X begin-selection
bind -T copy-mode-vi y send -X copy-selection
set -g set-clipboard on

# Custom scripts
bind f new-window "$HOME/.local/bin/tmux-sessionizer.sh"
bind i popup -E "$HOME/.local/bin/cheat.sh"
bind k popup -E "$HOME/.local/bin/snippet.sh"
bind g new-window "$HOME/.cargo/bin/bulletty"
bind j popup -E "cd $HOME/personal/.dotfiles && script=\$(echo -e 'sync-system.sh\nsync-remote.sh' | fzf --height=10 --header='Select sync script') && [ -n \"\$script\" ] && bash \"\$script\""

# ============================================
# STATUS BAR STYLING
# ============================================
set -g status-style bg=default,fg=#a0a8b7
set -g pane-border-style fg=#3a3d4b
set -g pane-active-border-style fg=#6b7089

# Status bar position and update interval
set -g status-position bottom
set -g status-interval 1
set -g status-justify left

# Status left (session name)
set -g status-left-length 50
set -g status-left "#[fg=#a0a8b7] #S "

# Window status
set -g window-status-format "#[fg=#6b7089] #I:#W "
set -g window-status-current-format "#[fg=#c0c8d7,bold] #I:#W "

# Status right (time and date)
set -g status-right-length 100
set -g status-right "#[fg=#6b7089] %H:%M  %Y-%m-%d "

# Message styling
set -g message-style bg=#6b7089,fg=#c0c8d7

